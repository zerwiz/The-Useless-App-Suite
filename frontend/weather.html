<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nihilist Weather - The Useless App Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shared.css">
    <style>
        body {
            background-color: #0a0a0a;
            font-family: 'Space Mono', monospace;
            color: #d1d1d1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            min-height: 100vh;
        }
        .scanline {
            width: 100%;
            height: 2px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.05);
            position: absolute;
            pointer-events: none;
            animation: scanline 6s linear infinite;
        }
        @keyframes scanline {
            0% { top: 0; }
            100% { top: 100%; }
        }
        .fade-in {
            animation: fadeIn 1.5s ease-in forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; filter: blur(10px); }
            to { opacity: 1; filter: blur(0); }
        }
        .btn-nihilist {
            transition: all 0.2s ease;
            border: 1px solid #333;
            background: rgba(255, 255, 255, 0.02);
        }
        .btn-nihilist:hover {
            background-color: #d1d1d1;
            color: #0a0a0a;
            border-color: #d1d1d1;
        }
        .day-btn.active {
            background-color: #d1d1d1;
            color: #0a0a0a;
            border-color: #d1d1d1;
        }
        input {
            background: transparent;
            border-bottom: 1px solid #333;
            outline: none;
            transition: border-color 0.3s ease;
            color: #d1d1d1;
        }
        input:focus {
            border-bottom-color: #d1d1d1;
        }
        .card {
            border: 1px solid #1a1a1a;
            background: rgba(255, 255, 255, 0.01);
        }
        .hidden-truth {
            opacity: 0;
            filter: blur(20px);
            transform: scale(0.95);
        }
        .revealed-truth {
            opacity: 1 !important;
            filter: blur(0) !important;
            transform: scale(1) !important;
        }
    </style>
</head>
<body>
    <div class="bg-glow"></div>
    <div class="scanline"></div>
    <a href="../index.html" class="back-btn">‚Üê Back to Hub</a>

    <main class="max-w-2xl w-full space-y-10 fade-in mx-auto">
        <header class="text-center">
            <h1 class="text-[10px] uppercase tracking-[0.4em] opacity-40 mb-4 font-bold">Terminal / Weather / Null</h1>
            <h2 class="text-4xl font-bold tracking-tighter mb-2">NIHILIST WEATHER</h2>
            <p class="text-xs opacity-30">Quantifying the void since 0.00000s</p>
        </header>

        <section class="py-16 border-y border-neutral-900 text-center relative overflow-hidden">
            <div id="loading-state" class="absolute inset-0 flex flex-col items-center justify-center bg-black transition-opacity duration-1000 z-20">
                <p class="text-[10px] uppercase tracking-[0.5em] animate-pulse opacity-40">System Idle: Awaiting Inquiry</p>
            </div>
            
            <p id="weather-display" class="hidden-truth text-4xl md:text-6xl font-bold tracking-tight text-white transition-all duration-1000">
                Outside exists.
            </p>
            <div id="unit-indicator" class="mt-4 text-[10px] opacity-0 transition-opacity duration-1000">SYSTEM: ABSOLUTE</div>
            
            <div class="mt-8 flex flex-wrap justify-center gap-2">
                <button onclick="selectDay('monday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="monday">Monday</button>
                <button onclick="selectDay('tuesday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="tuesday">Tuesday</button>
                <button onclick="selectDay('wednesday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="wednesday">Wednesday</button>
                <button onclick="selectDay('thursday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="thursday">Thursday</button>
                <button onclick="selectDay('friday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="friday">Friday</button>
                <button onclick="selectDay('saturday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="saturday">Saturday</button>
                <button onclick="selectDay('sunday')" class="btn-nihilist px-4 py-2 text-[10px] uppercase tracking-widest day-btn" data-day="sunday">Sunday</button>
            </div>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="card p-6 space-y-4">
                <h3 class="text-xs uppercase tracking-widest opacity-50 font-bold border-b border-neutral-900 pb-2">Location Inquiry</h3>
                <div class="flex flex-col space-y-4">
                    <input 
                        type="text" 
                        id="location-input" 
                        placeholder="Coordinates or city..." 
                        class="py-2 text-sm"
                        autocomplete="off"
                    >
                    <button 
                        onclick="updateWeather('search')" 
                        class="btn-nihilist w-full py-3 text-[10px] uppercase tracking-widest"
                    >
                        Validate Reality
                    </button>
                </div>
            </div>

            <div class="card p-6 space-y-4">
                <h3 class="text-xs uppercase tracking-widest opacity-50 font-bold border-b border-neutral-900 pb-2">Preference Engine</h3>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="changeUnit('metric')" class="btn-nihilist py-2 text-[10px]">CELSIUS</button>
                    <button onclick="changeUnit('imperial')" class="btn-nihilist py-2 text-[10px]">FAHRENHEIT</button>
                    <button onclick="changeUnit('void')" class="btn-nihilist py-2 text-[10px]">KELVIN</button>
                </div>
                <p class="text-[9px] opacity-30 italic leading-tight">Scale is a human construct. The magnitude remains unchanged.</p>
            </div>
        </div>

        <section class="card p-6">
            <h3 class="text-xs uppercase tracking-widest opacity-50 font-bold border-b border-neutral-900 pb-4 mb-4">5-Day Probability of Existence</h3>
            <div id="forecast-grid" class="grid grid-cols-5 gap-2 text-center opacity-0 transition-opacity duration-1000">
                <div class="space-y-2">
                    <div class="text-[9px] opacity-40">MON</div>
                    <div class="text-[10px] font-bold">EXISTS</div>
                </div>
                <div class="space-y-2 opacity-80">
                    <div class="text-[9px] opacity-40">TUE</div>
                    <div class="text-[10px] font-bold">EXISTS</div>
                </div>
                <div class="space-y-2 opacity-60">
                    <div class="text-[9px] opacity-40">WED</div>
                    <div class="text-[10px] font-bold">EXISTS</div>
                </div>
                <div class="space-y-2 opacity-40">
                    <div class="text-[9px] opacity-40">THU</div>
                    <div class="text-[10px] font-bold">EXISTS</div>
                </div>
                <div class="space-y-2 opacity-20">
                    <div class="text-[9px] opacity-40">FRI</div>
                    <div class="text-[10px] font-bold">EXISTS</div>
                </div>
            </div>
        </section>

        <section class="card overflow-hidden">
            <div class="bg-neutral-900/50 p-2 flex justify-between items-center">
                <span class="text-[9px] uppercase tracking-widest opacity-50 px-2">Live Satellite Feed</span>
                <span class="flex h-2 w-2 rounded-full bg-red-900/50 animate-pulse"></span>
            </div>
            <div class="h-32 bg-black flex items-center justify-center relative overflow-hidden">
                <div class="absolute inset-0 opacity-10 bg-[radial-gradient(circle,_#ffffff_1px,_transparent_1px)] [background-size:20px_20px]"></div>
                <p id="satellite-text" class="text-[10px] tracking-widest uppercase opacity-20">NO SIGNAL DETECTED</p>
                <button 
                    onclick="toggleSatellite()" 
                    class="absolute bottom-2 right-2 text-[8px] border border-neutral-800 px-2 py-1 opacity-40 hover:opacity-100 transition-opacity"
                >
                    REFRESH SCAN
                </button>
            </div>
        </section>

        <footer class="pt-8 space-y-4">
            <div id="status-message" class="text-[9px] opacity-30 uppercase tracking-[0.2em] min-h-[1.5em] text-center">
                System standing by. Please provide input to initiate observation.
            </div>
            <div class="flex justify-center space-x-4 opacity-20 text-[8px]">
                <span>PRESSURE: N/A</span>
                <span>HUMIDITY: 0%</span>
                <span>MEANING: 0.00</span>
            </div>
        </footer>
    </main>

    <script src="shared.js"></script>
    <script>
        const weatherDisplay = document.getElementById('weather-display');
        const statusMsg = document.getElementById('status-message');
        const locationInput = document.getElementById('location-input');
        const unitIndicator = document.getElementById('unit-indicator');
        const satelliteText = document.getElementById('satellite-text');
        const loadingState = document.getElementById('loading-state');
        const forecastGrid = document.getElementById('forecast-grid');

        function revealReality() {
            if (!loadingState) return;
            loadingState.style.opacity = "0";
            setTimeout(() => {
                loadingState.classList.add('hidden');
                if (weatherDisplay) weatherDisplay.classList.add('revealed-truth');
                if (unitIndicator) unitIndicator.style.opacity = "0.4";
                if (forecastGrid) forecastGrid.style.opacity = "1";
            }, 1000);
        }

        window.updateWeather = (mode) => {
            const loc = locationInput ? locationInput.value.trim() : '';
            
            if (loc) {
                Storage.set('weatherLocation', loc);
            }
            
            if (loadingState && !loadingState.classList.contains('hidden')) {
                if (statusMsg) statusMsg.innerText = mode === 'search' ? `Initiating deep scan for "${loc}"...` : "Polling reality...";
                revealReality();
            } else {
                if (weatherDisplay) weatherDisplay.classList.remove('revealed-truth');
                if (statusMsg) statusMsg.innerText = mode === 'search' ? `Re-evaluating "${loc}"...` : "Consulting the void...";
            }

            setTimeout(() => {
                if (weatherDisplay) {
                    weatherDisplay.innerText = "Outside exists.";
                    weatherDisplay.classList.add('revealed-truth');
                }
                
                if (loc) {
                    if (statusMsg) statusMsg.innerText = `Observation complete: Space-time coordinates for "${loc}" contain existence.`;
                } else {
                    if (statusMsg) statusMsg.innerText = "General consensus: External reality persists.";
                }
                
                if (locationInput) locationInput.value = "";
            }, 1200);
        };

        window.changeUnit = (unit) => {
            if (loadingState && !loadingState.classList.contains('hidden')) {
                if (statusMsg) statusMsg.innerText = "Initiating system with chosen units...";
                revealReality();
            } else {
                if (statusMsg) statusMsg.innerText = `Adapting construct to ${unit.toUpperCase()}...`;
            }
            
            Storage.set('weatherUnit', unit);
            
            setTimeout(() => {
                if (unitIndicator) unitIndicator.innerText = `SYSTEM: ${unit.toUpperCase()}`;
                if (weatherDisplay) weatherDisplay.classList.add('revealed-truth');
                if (statusMsg) statusMsg.innerText = "Conversion complete. The resulting truth is absolute.";
            }, 800);
        };

        window.toggleSatellite = () => {
            if (!satelliteText) return;
            satelliteText.innerText = "SCANNING...";
            satelliteText.classList.add('animate-pulse');
            
            if (loadingState && !loadingState.classList.contains('hidden')) revealReality();

            setTimeout(() => {
                if (satelliteText) {
                    satelliteText.innerText = "CONFIRMED: OUTSIDE EXISTS.";
                    satelliteText.classList.remove('animate-pulse');
                    satelliteText.style.opacity = "0.6";
                }
            }, 1500);
        };

        window.selectDay = (day) => {
            // Remove active class from all day buttons
            document.querySelectorAll('.day-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to selected button
            const selectedBtn = document.querySelector(`[data-day="${day}"]`);
            if (selectedBtn) {
                selectedBtn.classList.add('active');
            }
            
            // Update status message
            if (statusMsg) {
                const dayNames = {
                    monday: 'MONDAY',
                    tuesday: 'TUESDAY',
                    wednesday: 'WEDNESDAY',
                    thursday: 'THURSDAY',
                    friday: 'FRIDAY',
                    saturday: 'SATURDAY',
                    sunday: 'SUNDAY'
                };
                statusMsg.innerText = `Selected temporal fragment: ${dayNames[day]}. Existence probability: 100%.`;
            }
            
            // Update weather display with day-specific message
            if (weatherDisplay) {
                const dayMessages = {
                    monday: 'Monday exists. The void persists.',
                    tuesday: 'Tuesday confirmed. Reality holds.',
                    wednesday: 'Wednesday verified. Outside remains.',
                    thursday: 'Thursday validated. Existence continues.',
                    friday: 'Friday authenticated. The void endures.',
                    saturday: 'Saturday confirmed. Outside persists.',
                    sunday: 'Sunday verified. Reality maintains.'
                };
                weatherDisplay.innerText = dayMessages[day] || 'Outside exists.';
                weatherDisplay.classList.add('revealed-truth');
            }
        };

        function loadWeatherState() {
            const savedUnit = Storage.get('weatherUnit');
            if (savedUnit && unitIndicator) {
                unitIndicator.innerText = `SYSTEM: ${savedUnit.toUpperCase()}`;
                unitIndicator.style.opacity = "0.4";
            }
            const savedLocation = Storage.get('weatherLocation');
            if (savedLocation && locationInput) {
                locationInput.value = savedLocation;
            }
        }

        loadWeatherState();
        console.log("Terminal Ready. Inevitability loaded.");
    </script>
</body>
</html>
